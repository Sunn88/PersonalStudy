출제빈도 상
빈출태그 : TCP/UDP / RIP / OSPF

1) TCP/IP의 구조
- 목적 : 인터넷 계층은 패킷을 분할해 목적지로 전송하는 것
- 패킷의 전달 과정에 문제가 발생하면 패킷의 송신지 IP Address로 ICMP를 이용해 오류 메시지를 전송함
- 전송 계층의 역할 : 도달한 패킷의 손실 여부와 패킷의 순서 등을 관장함
    - 응용 계층 : HTTP, TELNET, SMTP, FTP, DNS
    - 전송 계층 : TCP, UDP
    - 인터넷 계층 : IP, ICMP, ARP, RARP

2) TCP의 개요
- TCP(Transmission Control Protocol) : 연결 지향형 프로토콜
- 송수신 포스트 간에 송수신할 수 있는 통로를 만들고 데이터를 전송함
- 신뢰성 있는 연결 서비스를 제공함
- 전송 메시지의 정확한 도착을 보장하고, 오류의 경우 재전송하며 흐름 제어 기능이 있음
- E-Mail, Download 등의 서비스에 적합함

3) TCP 세그먼트(Segment)
- TCP 세그먼트 : TCP를 이용해 두 종단 장치 간 송수신하는 데이터들의 단위
- 구성 : TCP 헤더 + 데이터
- 캡슐화 : IP 패킷의 데이터 부분에 포함되어 전송됨
- 포트 번호(port Number) : 상위 계층의 응용 프로그램으로 데이터를 전달하기 위한 통로
    - 0번부터 1023번까지는 예약이 되어 있음
- 대표 포트 번호 : FTP 데이터(20), FTP 제어(21), TELNET(23), SMTP(25), DNS(53), HTTP(80)
- TCP/IP 플래그(제어)비트
    - 연결 관리, 오류 제어, 흐름 제어 등 TCP 동작을 제어하기 위해 사용됨
    - SYN(Synchronization) : 초기 TCP 연결을 요청함
    - ACK(Acknowledgement) : ACK 번호 필드에 값이 타당한지 알려줌
    - FIN(Finish) : TCP 연결을 정상적으로 종료함
    - RST(Reset) : TCP 연결을 즉시 종료함
    - PSH(Push) : 세그먼트 내의 긴급 데이터가 아닌 데이터를 가능한 빨리 처리함
    - URG(Urgent) : 긴급 데이터로 처리함

4) UDP의 개요
- UDP(User Datagram Protocol) : 비연결 지향형 프로토콜
- 전송 메시지의 정확한 수신지 도착을 보장하지 않음
- 오류의 경우 재전송이 이루어지며, 흐름 제어 기능을 제공하지 않음
- 동영상 스트리밍, 화상 채팅과 같이 약간의 데이터 손실을 감수할 수 있는 서비스에 적합함

5) UDP 데이터그램
- UDP를 이용해 주고받는 메시지
- 구성 : UDP 헤더 + 데이터

6) 경로 설정(Routing)
- 경로 설정은 각 메시지에서 목적지까지 갈 수 있는 여러 경로 중 한 가지 경로를 설정해 주는 과정
- 경로 설정 요소(Parameter) : 성능 기준, 경로의 결정 시간과 장소, 네트워크 정보 발생지 등

7) 라우터의 주요 기능
- 서로 다른 네트워크를 연결해 원격의 호스트와 통신이 가능하도록 함
- 라우팅 테이블(Routing Table)에는 인접 네트워크 주소와 연결 인터페이스 혹은 원격니 네트워크로
    가기 위한 정보를 저장함
    - 경로 설정(Routing)
        - 패킷의 목적지 네트워크 정보를 확인함
        - 목적지까지 갈 수 있는 여러 경로를 확인함
        - 최적의 경로를 결정함
    - 스위칭(Switching)
        - 결정된 경로에 따라 패킷을 전달하는 것

8) 라우팅 프로토콜(Routing Protocol)
- 목적지 네트워크로 가는 경로를 알아내기 위해 사용하는 프로토콜
- 라우터 간에 네트워크 상태 정보를 교환하기 위해 사용함
- 라우팅 프로토콜은 정적 라우팅 프로토콜과 동적 라우팅 프로토콜로 구분됨
- 경로 설정 방식
    - Fixed Routing(고정 경로 제어)
    - Adaptive Routing(적응 경로 제어)
    - Flooding(범람 경로 제어)
    - Random Routing(임의 경로 제어)

9) 라우팅 프로토콜의 비교
- 정적 라우팅 프로토콜(Static Routing Protocol)
    - 정의
        - 관리자가 목적지 네트워크의 정보를 라우터에 직접 수동으로 입력하는 라우팅 프로토콜 
    - 특징 
        - 관리자가 지정한 경로로 무조건 패킷 전송
        - 정해진 경로를 따서 패킷을 전송하기 때문에 라우터에 부담이 없음
        - 일반적으로 학교나 기업에서 외부로 나가는 경로가 하나일 때 적용
    - 장점
        - 라우터의 프로세서(CPU)와 메모리를 적게 사용
        - 대역폭 절약, 보안성이 좋음
    - 단점
        - 시간과 비용의 증가
        - 네트워크의 변화에 대응의 어려움
        - 대규모 네트워크에 부적합
- 동적 라우팅 프로토콜(Dynamic Routing Protocol)
    - 정의
        - 관리자가 목적지 네트워크로 가기 위한 경로를 직접 입력하지 않고 라우터 간의 정보 교환을
            통해 최적의 경로를 찾아서 라우팅 테이블에 등록하는 프로토콜
    - 특징
        - 동일한 라우팅 프로토콜로 설정된 라우터끼리 서로의 네트워크 정보를 주기적으로 교환하면서
            라우팅 테이블에 등록된 최적의 경로를 수정하는 프로토콜
        - 사용하는 알고리즘에 따라 최적의 경로를 설정하며, 사용하는 알고리즘은 라우팅 프로토콜에
            따라 다름
    - 장점
        - 관리자가 라우팅 테이블을 관리해야 하는 부담이 없음
    - 단점
        - 서로 다른 라우팅 프로토콜을 사용하는 라우터 간에는 네트워크 정보를 교환하지 않음
        - 라우터에 부담이 큼

10) 동적 라우팅 프로토콜의 종류
- 거리 벡터(Distance Vector) 라우팅 프로토콜
    - 목적지 네트워크로 가는 경로까지 거쳐야 하는 라우터의 순수 물리적인 거리를 이용해 최적 경로 결정
    - ex) RIP, IGRP
- 링크 상태(Link-State) 라우팅 프로토콜
    - 대역폭과 지연 값 등의 링크의 상태를 이용해 최적의 경로 결정
    - ex) OSPF

11) 라우팅 프로토콜의 종류
- EGP(Exterior Gateway Protocol, 외부 게이트웨이 프로토콜)
    - 연구기관이나 국가기관, 대학, 기업 간, 즉 도메인(게이트웨이) 간에 라우팅 정보를 교환함
    - BGP(Border Gateway Protocol)
        - 외부 라우팅 프로토콜로서 AS(Autonomous System) 간의 라우팅을 함
        - 테이블을 전달하는 데 주로 이용함
- IGP(Interior Gatewat Protocol, 내부 게이트웨이 프로토콜)
    - RIP(Routing Information Protocol)
        - IP 통신망의 경로 지정 통신 규약의 하나
        - 경유하는 라우터의 대수(hop의 수량)에 따라 최단 경로를 동적으로 결정하는 거리 벡터 알고리즘
            사용
        - 버전1 :  인터넷, 인트라넷에 널리 사용되고 있음, 유닉스의 routed가 유명함, RFC 1058로 규정됨
        - 버전2 : RFC 1723으로 규정됨, CIDR에 대응될 수 있도록 기능이 확장되어 있음
        - 두 버전 모두 일반 기업의 구내 정보 통신망(LAN)에 이용되는 경우가 많음
    - OSPF(Open Shortest Path First protocol)
        - 링크 상태 라우팅 프로토콜
        - IP 패킷에서 프로토콜 번호 89번을 사용해 라우팅 정보를 전송해 안정되고 다양한 기능으로
            가장 많이 사용되는 IGP(Interior Gateway Protocol)
        - OSPF 라우터는 자신의 경로 테이블에 대한 정보를 LSA라는 자료구조를 통해 주기적으로 혹은
            라우터의 상태가 변화되었을 때 전송함
        - 라우터 간에 변경된 최소한의 부분만을 교환하므로 망의 효율을 저하시키지 않음
        - 도메인 내의 라우팅 프로토콜로서 RIP가 가지고 있는 여러 단점을 해결하고 있음
        - RIP(routing information protocol)의 경우 홉 카운트가 15로 제한되어 있지만 OSPF는 제한 없음